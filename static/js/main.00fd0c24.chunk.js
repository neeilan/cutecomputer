(this.webpackJsonpcute=this.webpackJsonpcute||[]).push([[0],{13:function(e,t,s){"use strict";s.r(t),function(e){var r=s(15),a=s(20),n={0:"R0",1:"R1",2:"R2",3:"R3",4:"R4",5:"RRA",6:"RBP",7:"RSP",8:"RIP"},i={R0:0,R1:1,R2:2,R3:3,R4:4,RRA:5,RBP:6,RSP:7,RIP:8},c={0:{name:"HALT",args:0,desc:"Args: none  -  Stops execution of the program here. Does not advance IP"},1:{name:"ADD",args:2,desc:"Args: <Reg1> <Reg2>  -  Sets Reg1 to Reg1 + Reg2"},2:{name:"ADDI",args:2,desc:"Args: <Reg> <Immediate>  -  Sets Reg to Reg + Immediate"},3:{name:"SUB",args:2,desc:"Args: <Reg1> <Reg2>  -  Sets Reg1 to Reg1 - Reg2"},4:{name:"SUBI",args:2,desc:"Args: <Reg> <Immediate>  -  Sets Reg to Reg - Immediate"},5:{name:"ASSERT",args:1,desc:""},6:{name:"LABEL",args:1,desc:"Args: <name>  -  Creates a label with gives name, pointing to next instruction"},7:{name:"JMPL",args:1,desc:""},8:{name:"JMPGT",args:3,desc:""},9:{name:"JMPGTE",args:3,desc:""},10:{name:"JMPEQ",args:2,desc:""},11:{name:"PRINT",args:1,desc:""},12:{name:"SETI",args:2,desc:"Args: <Reg> <Immediate>  -  Sets Reg to Immediate"},13:{name:"JMPI",args:1,desc:""},14:{name:"JMPEQI",args:3,desc:""},15:{name:"JMPEQIL",args:3,desc:"Args: <Reg> <Immediate> <Label>  -  If value of Reg equals Immediate, jump to Label"},16:{name:"PRINTBYTE",args:1,desc:""},17:{name:"DATA",args:2,varLen:!0,desc:""},18:{name:"PRINTSTRL",args:1,desc:""},19:{name:"PRINTBYTEI",args:1,desc:""},20:{name:"JMPEQL",args:3,desc:""},21:{name:"SET",args:2,desc:"Args: <Reg1> <Reg2>  -  Sets value Reg1 to the value of Reg2"},22:{name:"JMPLT",args:3,desc:""},23:{name:"JMPLTE",args:3,desc:""},24:{name:"LOAD",args:2,desc:"Args: <Reg1> <Reg2> - Load byte at address held in Reg2 into Reg1"},25:{name:"PUSH",args:1,desc:"Args: <Reg> - Pushes the value of Reg to the top of the stack (RSP) and increments RSP"},26:{name:"POP",args:1,desc:"Args: <Reg>  - Places the value on top of the stack (RSP-1) into Reg and decrements RSP"},27:{name:"CALL",args:1,desc:"Args: <Label>  -  Pushes RRA onto the stack, sets RRA to next instruction, and jumps to Label"},28:{name:"RET",args:0,desc:"Args: None  -  Returns control to the instruction at address RRA. Restores RRA to previous RRA value, which is expected to be on top of the stack (RSP-1)"},29:{name:"CHDATA",args:2,varLen:!0,desc:""},30:{name:"STORE",args:2,desc:"Args: <Reg1> <Reg2>  -  Stores value of Reg1 at address held in Reg2"},31:{name:"AOL",args:2,desc:"Args: <Label> <Register>  -  Address-of-label instruction. Sets Register to address Label refers to"},32:{name:"STORI",args:2,desc:"Args: <Reg> <Immediate>  -  Stores Immediate value at address held in Reg"},33:{name:"JMPNEQIL",args:3,desc:"Args: <Reg> <Immediate> <Label>  -  If value of Reg does not equal Immediate, jump to Label"},34:{name:"MUL",args:2,desc:"Args: <Reg1> <Reg2>  -  Sets Reg1 to Reg1 * Reg2"},35:{name:"MULI",args:2,desc:"Args: <Reg> <Immediate>  -  Sets Reg to Reg * Immediate"},36:{name:"DIV",args:2,desc:"Args: <Reg1> <Reg2>  -  Sets Reg1 to Reg1 / Reg2"},37:{name:"DIVI",args:2,desc:"Args: <Reg> <Immediate>  -  Sets Reg to Reg / Immediate"},38:{name:"PCALL",args:1,desc:"Preserved call"},39:{name:"PRET",args:0,desc:"Preserved ret"}},o={HALT:0,ADD:1,ADDI:2,SUB:3,SUBI:4,ASSERT:5,LABEL:6,JMPL:7,JMPGT:8,JMPGTE:9,JMPEQ:10,PRINT:11,SETI:12,JMPI:13,JMPEQI:14,JMPEQIL:15,PRINTBYTE:16,DATA:17,PRINTSTRL:18,PRINTBYTEI:19,JMPEQL:20,SET:21,JMPLT:22,JMPLTE:23,LOAD:24,PUSH:25,POP:26,CALL:27,RET:28,CHDATA:29,STORE:30,AOL:31,STORI:32,JMPNEQIL:33,MUL:34,MULI:35,DIV:36,DIVI:37,PCALL:38,PRET:39},d=12,l=[];Object.keys(c).forEach((function(e){return l.push(c[e].args)}));var m=function(e){return e.charCodeAt(0)};function h(t,s,n,i,c,o){for(var m={},h={},g=n;g<i;){var u=t[g];if(6===u)m[t[g+1]]=g+l[u]+1,g+=l[u]+1;else if(17===u||29===u){var R=t[g+1];h[R]=g+2,g+=3+t[h[R]]}else g+=l[u]+1}for(var b=0,j=0;s[8]<i;){var f=s[8];switch(t[f]){case 0:return;case 11:o(s[t[f+1]]),s[8]+=l[t[f]]+1;break;case 1:s[t[f+1]]+=s[t[f+2]],s[8]+=l[t[f]]+1;break;case 2:s[t[f+1]]+=t[f+2],s[8]+=l[t[f]]+1;break;case 3:s[t[f+1]]-=s[t[f+2]],s[8]+=l[t[f]]+1;break;case 4:s[t[f+1]]-=t[f+2],s[8]+=l[t[f]]+1;break;case 34:s[t[f+1]]*=s[t[f+2]],s[8]+=l[t[f]]+1;break;case 35:s[t[f+1]]*=t[f+2],s[8]+=l[t[f]]+1;break;case 36:if(0===(j=s[t[f+2]]))return void alert("SIGFPE - division by 0");s[t[f+1]]=Math.floor(s[t[f+1]]/j),s[8]+=l[t[f]]+1;break;case 37:if(0===(j=t[f+2]))return void alert("SIGFPE - division by 0");s[t[f+1]]=Math.floor(s[t[f+1]]/j),s[8]+=l[t[f]]+1;break;case 21:s[t[f+1]]=s[t[f+2]],s[8]+=l[t[f]]+1;break;case d:s[t[f+1]]=t[f+2],s[8]+=l[t[f]]+1;break;case 13:s[8]=t[f+1];break;case 7:s[8]=m[t[f+1]];break;case 6:s[8]+=2;break;case 10:(b=s[t[f+1]])===(j=s[t[f+2]])?s[8]=t[f+3]:s[8]+=l[t[f]]+1;break;case 14:(b=s[t[f+1]])===(j=t[f+2])?s[8]=t[f+3]:s[8]+=l[t[f]]+1;break;case 8:(b=s[t[f+1]])>(j=s[t[f+2]])?s[8]=m[t[f+3]]:s[8]+=l[t[f]]+1;break;case 9:(b=s[t[f+1]])>=(j=s[t[f+2]])?s[8]=s[t[f+3]]:s[8]+=l[t[f]]+1;break;case 22:(b=s[t[f+1]])<(j=s[t[f+2]])?s[8]=m[t[f+3]]:s[8]+=l[t[f]]+1;break;case 23:(b=s[t[f+1]])<=(j=s[t[f+2]])?s[8]=s[t[f+3]]:s[8]+=l[t[f]]+1;break;case 15:case 33:b=s[t[f+1]],j=t[f+2],(15===t[f]?b===j:b!==j)?s[8]=m[t[f+3]]:s[8]+=l[t[f]]+1;break;case 31:var v=h[t[f+1]];void 0===v&&(Object(a.a)("addr"),v=m[t[f+1]]),s[t[f+2]]=v,s[8]+=l[t[f]]+1;break;case 20:(b=s[t[f+1]])===(j=s[t[f+2]])?s[8]=m[t[f+3]]:s[8]+=l[t[f]]+1;break;case 19:e.stdout.write(String.fromCharCode(t[f+1])),s[8]+=l[t[f]]+1;break;case 16:var S=t[s[t[f+1]]];console.log(String.fromCharCode(S)),s[8]+=l[t[f]]+1;break;case 17:case 29:var p=t[f+1];s[8]+=2+t[h[p]]+1;break;case 24:s[t[f+1]]=t[s[t[f+2]]],console.log("Load ".concat(t[s[t[f+2]]]," into R").concat(t[f+1])),s[8]+=l[t[f]]+1;break;case 30:t[s[t[f+2]]]=s[t[f+1]],s[8]+=l[t[f]]+1;break;case 32:t[s[t[f+2]]]=t[f+1],s[8]+=l[t[f]]+1;break;case 25:t[s[7]++]=s[t[f+1]],s[8]+=l[t[f]]+1;break;case 26:var A=s[7]-1;s[t[f+1]]=t[A],s[7]=A,s[8]+=l[t[f]]+1;break;case 27:t[s[7]++]=s[5],s[5]=s[8]+l[t[f]]+1,s[8]=m[t[f+1]];break;case 28:var I=s[5];s[5]=t[--s[7]],s[8]=I;break;case 38:s[8]=s[8]+l[t[f]]+1;for(var x=Object(r.a)(s),O=[],y=s[6];y<s[7];y++)O.push(t[y]);x[7]-=O.length;for(var E=0;E<x.length;E++)t[s[6]+E]=x[E];for(var P=0;P<O.length;P++)t[s[6]+s.length+P]=O[P];s[6]=s[6]+s.length,s[7]=s[7]+s.length,O.splice(0,O.length),s[8]=m[t[f+1]];break;case 39:for(var T=Object(r.a)(s),k=[],L=T[6];L<T[7];L++)k.push(t[L]);for(var D=0;D<T.length;D++)s[D]=t[T[6]-s.length+D];k.forEach((function(e){t[s[7]]=e,s[7]++})),k.splice(0,k.length)}if(c)break}}m("H"),m("e"),m("l"),m("l"),m("o"),m(" "),m("W"),m("o"),m("r"),m("l"),m("d"),t.default=function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log;this.registers=[0,0,0,0,0,0,64,64,0],this.memory=e,this.print=s,this.execute=function(){return h(t.memory,t.registers,0,t.memory.length,!1,s)},this.executeStep=function(){return h(t.memory,t.registers,0,t.memory.length,!0,s)},this.setIp=function(e){return t.registers[t.REGISTER_NUMS.RIP]=e},this.REGISTER_NAMES=n,this.REGISTER_NUMS=i,this.OPCODES=c,this.OPS=o}}.call(this,s(34))},32:function(e,t,s){},35:function(e,t,s){s(13);function r(e){var t=[],s=[],r=!1;if(e.split("").forEach((function(e){if("\n"==e&&(r=!1),!r)if("#"!=e)if((" "==e||"\n"==e)&&s.length>0){var a=s.join("").trim();if(!a)return;t.push(a),s=[]}else-1===["\t",""].indexOf(e)&&s.push(e);else r=!0})),!r){var a=s.join("").trim();if(!a)return t;t.push(a)}return console.log(t),t}function a(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[];s.disasm=e.slice();for(var a={},n=1,i=0;i<e.length;){var c=e[i],o=t.OPS[c];if(void 0===o)throw new Error("Parsing error. Expected op at index "+i.toString()+" but got "+c);var d=t.OPCODES[o];if("DATA"===d.name){var l=e[i+1];a[l]=n++;var m=parseInt(e[i+2]);i+=m}else if("CHDATA"===d.name){var h=e[i+1];a[h]=n++;var g=parseInt(e[i+2]),u=e[i+3].split("");console.log(u);for(var R=0;R<g;R++)e.splice(i+R+3,0,u[R].charCodeAt(0));e.splice(i+u.length+3,1),s.disasm=e.slice();for(var b=0;b<g;b++)s.disasm[i+b+3]=u[b];console.log(e),i+=g}else if("LABEL"==d.name){var j=e[i+1];a[j]=n++}else if("AOL"===d.name){var f=a[e[i+1]];if(void 0===f)throw new Error("Usage of undefined label: "+e[i+2].toString());e[i+1]=f}i+=d.args+1}for(i=0,console.log(e),console.log(a);i<e.length;){var v=e[i],S=t.OPS[v];if(void 0===S)throw new Error("Parsing error. Expected op at index "+i.toString()+" but got "+v);r.push(S);for(var p=t.OPCODES[S],A=0;A++<p.args;){if(i+A>=e.length)throw new Error("Parse runs past code area");var I=e[i+A],x=parseInt(I);if(void 0!==t.REGISTER_NUMS[I]?r.push(t.REGISTER_NUMS[I]):isNaN(x)&&void 0!==a[I]?r.push(a[I]):r.push(parseInt(I)),p.varLen&&A===p.args){for(var O=r[r.length-1],y=1;y<=O;y++){var E=e[i+A+y];r.push(parseInt(E))}i+=O}}i+=p.args+1}return console.log(a),r}function n(e,t,s){if(t+s.length>e.length)throw new Error("Not enough memory to load ".concat(e.length," bytes at ").concat(t));return s.forEach((function(s,r){return e[t+r]=s})),e}e.exports=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=r(t),c={},o=a(i,e,c);return n(e.memory,s,o),c.disasm}},41:function(e,t,s){},42:function(e,t,s){"use strict";s.r(t);var r=s(0),a=s(1),n=s.n(a),i=s(17),c=s.n(i),o=(s(32),s(33),s(24)),d=s(18),l=s(19),m=s(26),h=s(23),g=s(14),u=s(21),R=s(7),b=s(6),j=s(8),f=s(16),v=s(25),S=s(22),p=s(13),A=s(35),I="LavenderBlush",x="ivory",O="Lavender",y="red",E=function(e){Object(m.a)(s,e);var t=Object(h.a)(s);function s(e){var r;Object(d.a)(this,s),r=t.call(this,e);var a=new Array(1024).fill(0);return r.machine=new p.default(a,alert),r.numAddrsToDisplay=128,r.numBytesPerRow=16,r.state={memory:a,memDisplayStartAddr:0,registers:r.machine.registers,source:"",asmArea:"",loadAddr:0,disasmTokens:[],disasmIsFresh:!1,docInstr:-1},r}return Object(l.a)(s,[{key:"memSet",value:function(e,t){t=parseInt(t),isNaN(t)&&(t=0),this.machine.memory[e]=t,this.setState({memory:this.machine.memory,disasmIsFresh:!1})}},{key:"regSet",value:function(e,t){t=parseInt(t),isNaN(t)&&(t=0),this.machine.registers[e]=t,this.setState({registers:this.machine.registers})}},{key:"setLoadAddr",value:function(e){e=parseInt(e),(isNaN(e)||e>=this.machine.memory.length)&&(e=0),this.setState({loadAddr:e,disasmIsFresh:!1})}},{key:"run",value:function(){this.machine.execute(),this.setState({registers:this.machine.registers,memory:this.machine.memory})}},{key:"step",value:function(){this.machine.executeStep(),this.setState({registers:this.machine.registers,memory:this.machine.memory})}},{key:"inspectAddr",value:function(e){e=parseInt(e),isNaN(e)||e<0||e>=this.machine.memory.length||this.setState({memDisplayStartAddr:e})}},{key:"asmAreaEdit",value:function(e){this.setState({asmArea:e})}},{key:"assemble",value:function(){var e=[];try{e=A(this.machine,this.state.asmArea,this.state.loadAddr),this.machine.registers[this.machine.REGISTER_NUMS.RSP]=(this.state.loadAddr||0)+e.length+1,this.machine.registers[this.machine.REGISTER_NUMS.RBP]=this.machine.registers[this.machine.REGISTER_NUMS.RSP],console.log(this.state.registers),this.setState({registers:this.machine.registers,memory:this.machine.memory,disasmTokens:e,disasmIsFresh:!0})}catch(t){alert(t),this.setState({registers:this.machine.registers,memory:this.machine.memory,disasmTokens:[],disasmIsFresh:!1})}}},{key:"memPrev",value:function(){var e=this.state.memDisplayStartAddr-this.numAddrsToDisplay;e<0&&(e=0),this.setState({memDisplayStartAddr:e})}},{key:"memNext",value:function(){var e=this.state.memDisplayStartAddr+this.numAddrsToDisplay;e>=this.machine.memory.length||this.setState({memDisplayStartAddr:e})}},{key:"availableInstrs",value:function(){for(var e=[],t=0,s=Object.entries(this.machine.OPCODES);t<s.length;t++){var r=Object(o.a)(s[t],2),a=r[0],n=r[1];e.push({name:n.name,opCode:a,desc:n.desc})}return e}},{key:"render",value:function(){var e=this,t=this.state.memory.slice(this.state.memDisplayStartAddr,this.state.memDisplayStartAddr+this.numAddrsToDisplay),s=[],a=this.state.registers[this.machine.REGISTER_NUMS.RIP]-this.state.memDisplayStartAddr,n=this.state.registers[this.machine.REGISTER_NUMS.RSP]-this.state.memDisplayStartAddr,i=this.state.registers[this.machine.REGISTER_NUMS.RBP]-this.state.memDisplayStartAddr;return t.forEach((function(c,o){if(o%e.numBytesPerRow===0){for(var d=[],l=0;l<e.numBytesPerRow;l++)d.push(l);s.push(Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{style:{backgroundColor:x},children:e.state.memDisplayStartAddr+o}),d.map((function(s){var c=o+s,d=a===c?I:n===c?O:i===c?y:"",l=c+e.state.memDisplayStartAddr,m=e.state.disasmIsFresh&&l>=e.state.loadAddr&&l<e.state.loadAddr+e.state.disasmTokens.length;return Object(r.jsxs)("td",{style:{backgroundColor:d,overflow:"hidden"},children:[m?Object(r.jsx)("div",{class:"disasm",children:e.state.disasmTokens[l-e.state.loadAddr]}):"",Object(r.jsx)("input",{type:"text",style:{width:"100%",border:"none",backgroundColor:d},onChange:function(t){return e.memSet(o+s,t.target.value)},value:t[o+s],disabled:o+s+e.state.memDisplayStartAddr>=e.state.memory.length})," "]},"mem-".concat(o+s))}))]}))}})),Object(r.jsxs)("div",{className:"monospaced",children:["  ",Object(r.jsxs)(u.a,{children:[Object(r.jsxs)(R.a,{style:{textAlign:"center"},children:[Object(r.jsxs)(b.a,{md:2,children:[Object(r.jsx)(R.a,{children:Object(r.jsx)(b.a,{style:{marginBottom:"10px"},children:Object(r.jsx)("b",{children:"CPU"})})}),Object(r.jsx)(g.a,{bordered:!0,responsive:!0,size:"sm",children:Object(r.jsx)("tbody",{children:this.state.registers.map((function(t,s){var a="RIP"===e.machine.REGISTER_NAMES[s],n="RSP"===e.machine.REGISTER_NAMES[s],i="RBP"===e.machine.REGISTER_NAMES[s],c=a?I:n?O:i?y:"";return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{style:{backgroundColor:x},children:e.machine.REGISTER_NAMES[s]}),Object(r.jsx)("td",{style:{backgroundColor:c},children:Object(r.jsx)("input",{type:"text",style:{width:"100%",border:"none",backgroundColor:c},value:t,onChange:function(t){return e.regSet(s,t.target.value)}})},"mem-".concat(s))]})}))})}),Object(r.jsx)(R.a,{children:Object(r.jsxs)(b.a,{children:[Object(r.jsx)(j.a,{variant:"light",onClick:function(){return e.run()},children:"Run"}),Object(r.jsx)(j.a,{style:{marginLeft:"2px"},variant:"light",onClick:function(){return e.step()},children:"Step"})]})})]}),Object(r.jsx)(b.a,{md:10,children:Object(r.jsxs)(b.a,{md:12,children:[Object(r.jsx)(R.a,{children:Object(r.jsx)(b.a,{style:{marginBottom:"10px"},children:Object(r.jsx)("b",{children:"Memory"})})}),Object(r.jsx)(g.a,{bordered:!0,responsive:!0,size:"sm",children:Object(r.jsx)("tbody",{children:s})}),Object(r.jsxs)(R.a,{style:{marginBottom:"5px",marginLeft:"5px"},children:[Object(r.jsxs)(j.a,{variant:"light",onClick:function(){return e.memPrev()},children:[" ","<"," "]}),Object(r.jsxs)(j.a,{style:{marginLeft:"2px"},variant:"light",onClick:function(){return e.memNext()},children:[" ",">"," "]}),Object(r.jsx)("input",{type:"text",style:{border:"solid 1px lightgray",marginLeft:"15px",paddingLeft:"10px"},onChange:function(t){return e.inspectAddr(t.target.value)},placeholder:"Go to address"})]})]})})]}),Object(r.jsx)("hr",{}),Object(r.jsxs)(R.a,{style:{textAlign:"center",marginTop:"10px"},children:[Object(r.jsxs)(b.a,{sm:6,children:[Object(r.jsx)(R.a,{children:Object(r.jsx)(b.a,{style:{marginBottom:"10px"},children:Object(r.jsx)("b",{children:"Assembler"})})}),Object(r.jsx)(R.a,{children:Object(r.jsx)("textarea",{placeholder:"Assembly Editor",style:{width:"100%",height:"100%",minHeight:"220px",paddingLeft:"10px",borderColor:"lightgray"},value:this.state.asmArea,onChange:function(t){return e.asmAreaEdit(t.target.value)}})}),Object(r.jsx)(R.a,{children:Object(r.jsx)(b.a,{sm:12,children:Object(r.jsxs)(f.a,{style:{marginTop:"5px"},children:[Object(r.jsx)(v.a,{onChange:function(t){return e.setLoadAddr(t.target.value)},placeholder:"Address to load program at (Default = 0)"}),Object(r.jsx)(f.a.Append,{children:Object(r.jsx)(j.a,{variant:"info",onClick:function(){return e.assemble()},children:"Load"})})]})})})]}),Object(r.jsxs)(b.a,{sm:6,children:[Object(r.jsx)(R.a,{children:Object(r.jsx)(b.a,{style:{marginBottom:"10px"},children:Object(r.jsx)("b",{children:"Instruction Set"})})}),Object(r.jsx)(R.a,{children:Object(r.jsxs)(b.a,{sm:12,style:{overflowY:"scroll"},children:[Object(r.jsx)("h5",{children:this.availableInstrs().map((function(t,s){return Object(r.jsxs)("a",{onClick:function(){return e.setState({docInstr:s})},children:[Object(r.jsx)(S.a,{pill:!0,variant:e.state.docInstr===s?"primary":"light",children:t.name})," "]})}))}),Object(r.jsx)("br",{}),-1===this.state.docInstr?"":this.availableInstrs()[this.state.docInstr].desc]})})]})]})]})]})}}]),s}(n.a.Component);s(41);var P=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)(E,{})]})},T=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,43)).then((function(t){var s=t.getCLS,r=t.getFID,a=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),r(e),a(e),n(e),i(e)}))};c.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(P,{})}),document.getElementById("root")),T()}},[[42,1,2]]]);
//# sourceMappingURL=main.00fd0c24.chunk.js.map